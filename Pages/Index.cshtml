@page
@model IndexModel
@{
    ViewData["Title"] = "BeerRate - Rate Your Favorite Beers";
    Layout = null; // Use no layout to serve just our HTML
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeerRate - Rate Your Favorite Beers</title>
    <link rel="stylesheet" href="~/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🍺 BeerRate</h1>
            <p>Rate and track your favorite beers</p>
        </header>

        <!-- Add Beer Form -->
        <section class="add-beer-section">
            <h2>Add a New Beer</h2>
            <form id="beerForm">
                <div class="form-group">
                    <label for="beerName">Beer Name:</label>
                    <input type="text" id="beerName" required>
                </div>

                <div class="form-group">
                    <label for="brewery">Brewery:</label>
                    <input type="text" id="brewery" required>
                </div>

                <div class="form-group">
                    <label for="beerStyle">Beer Style:</label>
                    <select id="beerStyle" required>
                        <option value="">Select a style...</option>
                        <option value="IPA">IPA (India Pale Ale)</option>
                        <option value="Lager">Lager</option>
                        <option value="Stout">Stout</option>
                        <option value="Porter">Porter</option>
                        <option value="Wheat Beer">Wheat Beer</option>
                        <option value="Pilsner">Pilsner</option>
                        <option value="Ale">Ale</option>
                        <option value="Sour">Sour</option>
                        <option value="Amber">Amber</option>
                        <option value="Brown Ale">Brown Ale</option>
                        <option value="Pale Ale">Pale Ale</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Rating:</label>
                    <div class="rating-buttons">
                        <button type="button" class="rating-btn" data-rating="1">⭐ 1 - Bad</button>
                        <button type="button" class="rating-btn" data-rating="2">⭐⭐ 2 - Drinkable</button>
                        <button type="button" class="rating-btn" data-rating="3">⭐⭐⭐ 3 - Good</button>
                        <button type="button" class="rating-btn" data-rating="4">⭐⭐⭐⭐ 4 - Great</button>
                    </div>
                    <input type="hidden" id="rating" required>
                </div>

                <button type="submit" class="submit-btn">Add Beer</button>
            </form>
        </section>



        <!-- Search Section -->
        <section class="search-section">
            <h2>Search Your Beers</h2>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search by name, brewery, or style...">
                <button id="clearSearchBtn" class="clear-search-btn" style="display: none;">✕ Clear</button>
            </div>
        </section>

        <!-- Beer List -->
        <section class="beer-list-section">
            <h2>Your Beer Ratings</h2>
            <div id="beerList" class="beer-list">
                @if (Model.BeerRatings.Any())
                {
                    @foreach (var beer in Model.BeerRatings)
                    {
                        <div class="beer-card" data-beer-id="@beer.Id">
                            <h3>@beer.BeerName</h3>
                            <p><strong>Brewery:</strong> @beer.Brewery</p>
                            <p><strong>Style:</strong> @beer.Style</p>
                            <p><strong>Rating:</strong> 
                                @for (int i = 1; i <= beer.Rating; i++)
                                {
                                    <span>⭐</span>
                                }
                            </p>
                        </div>
                    }
                }
                else
                {
                    <p class="no-beers">No beers rated yet. Add your first beer above!</p>
                }
            </div>
        </section>

        <!-- Data Management Section -->
        <section class="backup-section">
            <h2>Data Management</h2>
            <div class="backup-controls">
                <button id="exportBtn" class="backup-btn">📥 Export to CSV</button>
                <button id="statsBtn" class="backup-btn">📊 View Stats</button>
            </div>
        </section>

        <!-- Stats Modal -->
        <div id="statsModal" class="stats-modal" style="display: none;">
            <div class="stats-content">
                <button class="close-btn" id="closeStats">&times;</button>
                <h3>🍺 Beer Rating Statistics</h3>
                <div id="statsData">
                    <!-- Stats will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script src="~/script.js"></script>
</body>
</html>
